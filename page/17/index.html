<!DOCTYPE html>
<html>
<head><meta name="generator" content="Hexo 3.9.0">
  <meta charset="utf-8">
  
  <title>Hui Wang&#39;s Blog</title>
  <meta name="baidu-site-verification" content="yXEzwss0jm">
  <meta name="360-site-verification" content="878e013ea1c0235dec34a8b1c676cf65">
  <meta name="viewport" content="width=device-width, initial-scale=1, maximum-scale=1">
  
    <meta name="keywords" content="PHP,Laravel,JavaScript,Jquery,Linux,前端博客">
  
  <meta name="description" content="记录我的IT学习经历，分享技术">
<meta name="keywords" content="PHP,Laravel,JavaScript,Jquery,Linux,前端博客">
<meta property="og:type" content="website">
<meta property="og:title" content="Hui Wang&#39;s Blog">
<meta property="og:url" content="https://www.xydida.com/page/17/index.html">
<meta property="og:site_name" content="Hui Wang&#39;s Blog">
<meta property="og:description" content="记录我的IT学习经历，分享技术">
<meta property="og:locale" content="en">
<meta name="twitter:card" content="summary">
<meta name="twitter:title" content="Hui Wang&#39;s Blog">
<meta name="twitter:description" content="记录我的IT学习经历，分享技术">
  
    <link rel="alternate" href="/sitemap.xml" title="Hui Wang&#39;s Blog" type="application/atom+xml">
  
  
    <link rel="icon" href="/favicon.ico">
  
  
    <link href="//fonts.googleapis.com/css?family=Source+Code+Pro" rel="stylesheet" type="text/css">
  
  <link rel="stylesheet" href="/css/style.css">
  
<!-- Google Analytics -->
<script type="text/javascript">
(function(i,s,o,g,r,a,m){i['GoogleAnalyticsObject']=r;i[r]=i[r]||function(){
(i[r].q=i[r].q||[]).push(arguments)},i[r].l=1*new Date();a=s.createElement(o),
m=s.getElementsByTagName(o)[0];a.async=1;a.src=g;m.parentNode.insertBefore(a,m)
})(window,document,'script','//www.google-analytics.com/analytics.js','ga');

ga('create', 'true', 'auto');
ga('send', 'pageview');

</script>
<!-- End Google Analytics -->

<!-- Global site tag (gtag.js) - Google Analytics -->
<script async src="https://www.googletagmanager.com/gtag/js?id=UA-98739349-1"></script>
<script>
  window.dataLayer = window.dataLayer || [];
  function gtag(){dataLayer.push(arguments);}
  gtag('js', new Date());

  gtag('config', 'UA-98739349-1');
</script>


  
<!-- Google Adscene -->
<script data-ad-client="ca-pub-8701685410355750" async src="https://pagead2.googlesyndication.com/pagead/js/adsbygoogle.js"></script>
<!-- End Google Analytics -->


  
    <!-- CNZZ Analytics -->
    <script type="text/javascript">document.write(unescape("%3Cspan id='cnzz_stat_icon_1257809326'%3E%3C/span%3E%3Cscript src='https://s95.cnzz.com/z_stat.php%3Fid%3D1257809326' type='text/javascript'%3E%3C/script%3E"));</script>
    <style>
        span#cnzz_stat_icon_1257809326 {display:none;}
    </style>
    <!-- End CNZZ Analytics -->



  <link href="https://cdnjs.cloudflare.com/ajax/libs/KaTeX/0.15.1/katex.min.css" rel="stylesheet" type="text/css">
</head>
</html>
<body>
  <div id="container">
    <div id="wrap">
      <header id="header">
  <div id="banner"></div>
  <div id="header-outer" class="outer">
    <div id="header-title" class="inner">
      <h1 id="logo-wrap">
        <a href="/" id="logo">Hui Wang&#39;s Blog</a>
      </h1>
      
        <h2 id="subtitle-wrap">
          <a href="/" id="subtitle">Keep going</a>
        </h2>
      
    </div>
    <div id="header-inner" class="inner">
      <nav id="main-nav">
        <a id="main-nav-toggle" class="nav-icon"></a>
        
          <a class="main-nav-link" href="/">Home</a>
        
          <a class="main-nav-link" href="/archives">Archives</a>
        
          <a class="main-nav-link" href="/about/eng.html">About</a>
        
      </nav>
      <nav id="sub-nav">
        
          <a id="nav-rss-link" class="nav-icon" href="/sitemap.xml" title="RSS Feed"></a>
        
        <a id="nav-search-btn" class="nav-icon" title="Search"></a>
      </nav>
      <div id="search-form-wrap">
        <form action="//google.com/search" method="get" accept-charset="UTF-8" class="search-form"><input type="search" name="q" class="search-form-input" placeholder="Search"><button type="submit" class="search-form-submit">&#xF002;</button><input type="hidden" name="sitesearch" value="https://www.xydida.com"></form>
      </div>
    </div>
  </div>
</header>
      <div class="outer">
        <section id="main">
  
    <article id="post-rethinking-in-Object-Oriented" class="article article-type-post" itemscope itemprop="blogPost">
  <div class="article-meta">
    <a href="/2018/6/1/Object-Oriented/rethinking-in-Object-Oriented/" class="article-date">
  <time datetime="2018-06-01T07:00:57.000Z" itemprop="datePublished">2018-06-01</time>
</a>
    
  <div class="article-category">
    <a class="article-category-link" href="/categories/Object-Oriented/">Object Oriented</a>
  </div>

  </div>
  <div class="article-inner">
    
    
      <header class="article-header">
        
  
    <h1 itemprop="name">
      <a class="article-title" href="/2018/6/1/Object-Oriented/rethinking-in-Object-Oriented/">面向对象的再思考</a>
    </h1>
  

      </header>
    
    <div class="article-entry" itemprop="articleBody">
      
        <!-- Table of Contents -->
        

        <img src="https://upload-images.jianshu.io/upload_images/2650331-029d8ef8e50a83c6.jpg?imageMogr2/auto-orient/strip%7CimageView2/2/w/1240" title="" alt="">
<h1 id="为什么要再次思考"><a class="markdownIt-Anchor" href="#为什么要再次思考"></a> 为什么要再次思考</h1>
<p>临近毕业，自己投了很多简历，也参加了好多轮的面试，不论结果如何，自己也从中收获了很多，发现了自己的诸多不足。大多数的面试都会提到面向对象的问题，虽然自己上了很多面向对象编程的课，学习了几门面向对象的语言，但当坐在面试官面前面对面讨论面向对象问题时，自己的无知立马显现出来，所以我觉得有必要再次思考什么是面向对象（Object Oriented）。</p>
<h1 id="什么是对象"><a class="markdownIt-Anchor" href="#什么是对象"></a> 什么是对象？</h1>
<p>面向对象中的对象（Object）是什么呢？面向对象程序设计（OOP）及时使用对象来进行程序设计，对象就是代表现实世界中可以明确分辨的一个实体，一个人、一辆车、一个圆、一次交易都可以看作是一个对象，不管是真实存在的还是虚拟的。一个对象通常都有自己的特征和行为。</p>
<ul>
<li>对象的特征（property），也可以称为属性（attribute），是一个数据域</li>
<li>对象的行为（behavior），也可以称为动作（action），只这个对象可以去做什么</li>
</ul>
<h2 id="面向过程到面向对象的过渡"><a class="markdownIt-Anchor" href="#面向过程到面向对象的过渡"></a> 面向过程到面向对象的过渡</h2>
<p>刚开始接触编程时，还是学的C语言（多么古老而又不可替代的语言啊），慢慢接触到了C++，Java，PHP等面向对象的语言，面向过程到面向对象的转换并非易事，首先就是思考问题的方式，落到实际行动就是面向过程首先关注这个函数怎么写，面向对象首先关注如何把要解决的问题抽象出来，编写父类、子类。</p>
<h2 id="类与对象"><a class="markdownIt-Anchor" href="#类与对象"></a> 类与对象</h2>
<p>面向对象中的类是一个模版、蓝本或者说是合约，用来定义一个对象的数据域是什么以及方法是做什么的。一个对象就是一个类的实例，可以从类中创建多个实例，类和对象之间的关系类似于生产玩具汽车的铸模和玩具汽车。</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br></pre></td><td class="code"><pre><span class="line">class Car</span><br><span class="line">&#123;</span><br><span class="line">    public $branch = &quot;default branch&quot;;</span><br><span class="line">    public $no = &quot;A123&quot;;</span><br><span class="line">    </span><br><span class="line">    function __construct($branch, $no) &#123;</span><br><span class="line">        $this-&gt;branch = $branch;</span><br><span class="line">        $this-&gt;no = $no;</span><br><span class="line">    &#125;</span><br><span class="line">    </span><br><span class="line">    function run() &#123;</span><br><span class="line">        echo &quot;The car is running!&quot;;</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line">$car1 = new Car(&quot;奔驰&quot;, &quot;B111&quot;);</span><br><span class="line">$car2 = new Car(&quot;宝马&quot;, &quot;C222&quot;);</span><br><span class="line"></span><br><span class="line">var_dump($car1);</span><br><span class="line">var_dump($car2);</span><br></pre></td></tr></table></figure>
<img src="https://ws2.sinaimg.cn/large/006tNc79gy1frwpw3h749j308s0aot9m.jpg" title="" alt="">
<h1 id="什么是面向对象"><a class="markdownIt-Anchor" href="#什么是面向对象"></a> 什么是面向对象？</h1>
<p>在学习面向对象时，经常会谈到面向对象的三大特点：封装、继承和多态，正是由于这三大特点，面向对象的世界才如此的丰富。对于我来说，尽管接触了这么长时间的面向对象，但如果要我具体说一下这三大特点，我可能还要查资料才说的明白，所以还是有必要把整个学习的过程记录下来。</p>
<h2 id="封装-encapsulation"><a class="markdownIt-Anchor" href="#封装-encapsulation"></a> 封装 Encapsulation</h2>
<p>在讨论这三大特点时，往往最容易忽视的就是封装，而在开始学习的时候，初学者并没有太在意这个问题，因为刚开始接触的时候，不管是声明属性还是方法，直接<code>public ...</code>，因为这是最简单而且有效的，当然书上包括老师上课也讲了<code>public</code>、<code>protected</code>、<code>private</code>的一些关系，但新手并不会对项目的工程化做太多的思考，代码跑起来就行了，这在阅读别人的代码时一眼就能看出些这个代码的人是新手还是老手，是否真正理解封装，善用访问修饰符。</p>
<p><code>public</code>可以用啊，为什么还要使用其他的访问修饰符呢？<code>public</code>, <code>protected</code>, <code>private</code>的访问权限：</p>
<ul>
<li>任何地方都可以访问<code>public</code>属性和方法</li>
<li>当前类才能访问<code>private</code>属性和方法，子类也不能访问</li>
<li>当前类和子类都可以访问<code>protected</code>属性和方法，其他的外部代码都不能访问</li>
</ul>
<p>先理解什么是封装？简单的说，封装就是通过众所周知的接口将用户与实际应用程序的内部工作原理分离。人都有好奇心，总喜欢朝着未知探索，喜欢把东西拆开，了解里面的小零件如何工作，虽然能得到精神上的满足，但有时深入了解事物内部的工作原理并不是必要的，我们每天都在使用计算机和手机，但很少有人真正了解它的工作原理，但即便不理解原理，也不想我们使用它们，因为接口隐藏了这些细节。</p>
<p>要怎么实现呢？最简单的方式就是给属性和方法添加访问修饰符（<code>public</code>, <code>protected</code>, <code>private</code>）。通过对客户端代码隐藏属性，就可以防止对对象的属性恶意修改了。其次还可以通过制作接口，把细节隐藏起来。</p>
<p><code>public</code>这里不多讲，先来讲<code>protected</code>吧，代码如下：</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br></pre></td><td class="code"><pre><span class="line">&lt;?php</span><br><span class="line">class Animal &#123;</span><br><span class="line">    protected $name = &quot;default name&quot;;</span><br><span class="line"></span><br><span class="line">    protected function say() &#123;</span><br><span class="line">        echo &quot;Name: &quot; . $this-&gt;name . &quot;\n&quot;;</span><br><span class="line">        echo &quot;animal say\n&quot;;</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line">class Dog extends Animal &#123;</span><br><span class="line"></span><br><span class="line">    public function f1() &#123;</span><br><span class="line">        $this-&gt;say();</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line">$dog = new Dog();</span><br><span class="line">$animal = new Animal();</span><br><span class="line"></span><br><span class="line">echo $dog-&gt;f1();</span><br><span class="line"></span><br><span class="line">echo $animal-&gt;name;</span><br><span class="line">?&gt;</span><br></pre></td></tr></table></figure>
<img src="https://ws4.sinaimg.cn/large/006tNc79gy1frwv81be0gj31eu09ytb5.jpg" title="" alt="">
<p>可以看到<code>Dog</code>类继承自<code>Animal</code>类，在<code>Dog</code>类中可以获取到<code>name</code>属性，还能执行<code>say()</code>方法，结果中我们还看到，程序执行到23行就报错了，很明显，我们在外面定义了一个<code>Animal</code>变量，并试图访问<code>protected</code>修饰的<code>name</code>属性，导致程序出错。</p>
<p>再来看看<code>private</code>：</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br></pre></td><td class="code"><pre><span class="line">&lt;?php</span><br><span class="line">class Foo</span><br><span class="line">&#123;</span><br><span class="line">    private $key = &quot;This is a private value&quot;;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line">$foo = new Foo;</span><br><span class="line">echo $foo-&gt;key;     // Error  类外不能访问private属性</span><br><span class="line">?&gt;</span><br></pre></td></tr></table></figure>
<img src="https://ws3.sinaimg.cn/large/006tNc79gy1frwvqlo1wdj31d2084mze.jpg" title="" alt="类外不能访问private属性">
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br></pre></td><td class="code"><pre><span class="line">&lt;?php</span><br><span class="line">class Foo</span><br><span class="line">&#123;</span><br><span class="line">    private $key = &quot;This is a private value&quot;;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line">class Bar extends Foo</span><br><span class="line">&#123;</span><br><span class="line">    public function f1() &#123;</span><br><span class="line">        echo $this-&gt;key . &apos;\n&apos;;</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line">$bar = new Bar;</span><br><span class="line">$bar-&gt;f1();     // Error  子类中也不能访问private属性</span><br><span class="line">?&gt;</span><br></pre></td></tr></table></figure>
<img src="https://ws2.sinaimg.cn/large/006tNc79gy1frwvuiyoi8j311e02sq3w.jpg" title="" alt="子类中也不能访问private属性">
<p>看到子类<code>Bar</code>并没有从父类<code>Foo</code>继承<code>private</code>属性。</p>
<h2 id="继承-inheritance"><a class="markdownIt-Anchor" href="#继承-inheritance"></a> 继承 Inheritance</h2>
<p>继承是从一个基类得到一个或多个派生类的机制。通过定义一个从其他类继承过来的类，我们可以确保一个类拥有其自由的功能和父类的功能（除private方法或属性），另一种理解继承的思路是“搜索”，当我们调用一个变量或方法时，会先在当前调用的类中查找有没有这个属性或方法，如果没有就查找父类中的默认实现。</p>
<p>现在有<code>CDProduct</code>和<code>BookProduct</code>两种商品，我么分别用继承和不继承来对比下：</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br><span class="line">61</span><br></pre></td><td class="code"><pre><span class="line">&lt;?php</span><br><span class="line">class CDProduct &#123;</span><br><span class="line">    public $playLength;</span><br><span class="line">    public $title;</span><br><span class="line">    public $mainName;</span><br><span class="line">    public $firstName;</span><br><span class="line">    public $price;</span><br><span class="line"></span><br><span class="line">    public function __construct($title, $mainName, $firstName, $price, $playLength) &#123;</span><br><span class="line">        $this-&gt;title = $title;</span><br><span class="line">        $this-&gt;mainName = $mainName;</span><br><span class="line">        $this-&gt;firstName = $firstName;</span><br><span class="line">        $this-&gt;price = $price;</span><br><span class="line">        $this-&gt;playLength = $playLength;</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    public function getPlayLength() &#123;</span><br><span class="line">        return $this-&gt;playLength;</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    public function getSummaryLine() &#123;</span><br><span class="line">        $base = &quot;&#123;$this-&gt;title&#125; ( &#123;$this-&gt;mainName&#125;, &#123;$this-&gt;firstName&#125;)&quot;;</span><br><span class="line">        $base .= &quot; playing time = &#123;$this-&gt;playLength&#125;&quot;;</span><br><span class="line">        return $base;</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    public function getProucer() &#123;</span><br><span class="line">        return &quot;&#123;$this-&gt;firstName&#125; &#123;$this-&gt;mainName&#125;&quot;;</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line">class BookProduct &#123;</span><br><span class="line">    public $numPages;</span><br><span class="line">    public $title;</span><br><span class="line">    public $mainName;</span><br><span class="line">    public $firstName;</span><br><span class="line">    public $price;</span><br><span class="line"></span><br><span class="line">    public function __construct($title, $mainName, $firstName, $price, $numPages) &#123;</span><br><span class="line">        $this-&gt;title = $title;</span><br><span class="line">        $this-&gt;mainName = $mainName;</span><br><span class="line">        $this-&gt;firstName = $firstName;</span><br><span class="line">        $this-&gt;price = $price;</span><br><span class="line">        $this-&gt;numPages = $numPages;</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    public function getNumberOfPages() &#123;</span><br><span class="line">        return $this-&gt;numPages;</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    public function getSummaryLine() &#123;</span><br><span class="line">        $base = &quot;&#123;$this-&gt;title&#125; ( &#123;$this-&gt;mainName&#125;, &#123;$this-&gt;firstName&#125;)&quot;;</span><br><span class="line">        $base .= &quot; page count = &#123;$this-&gt;numPages&#125;&quot;;</span><br><span class="line">        return $base;</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    public function getProucer() &#123;</span><br><span class="line">        return &quot;&#123;$this-&gt;firstName&#125; &#123;$this-&gt;mainName&#125;&quot;;</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br><span class="line">?&gt;</span><br></pre></td></tr></table></figure>
<p>可以看到，在没有使用继承的情况下，我们做了很多重复的劳动，每个产品都有<code>getSummaryLine()</code>方法，每个类中的<code>getProducer()</code>方法完全相同，他们的构造方法中用同样的方法设置了许多相同的属性，这样的代码看起来一点都不干净，即使我们我可以不停地复制、粘贴，仍然存在问题，不利于后期代码的重构。我们现在使用继承来优化它：</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br><span class="line">61</span><br><span class="line">62</span><br><span class="line">63</span><br><span class="line">64</span><br><span class="line">65</span><br><span class="line">66</span><br><span class="line">67</span><br><span class="line">68</span><br><span class="line">69</span><br><span class="line">70</span><br><span class="line">71</span><br><span class="line">72</span><br><span class="line">73</span><br><span class="line">74</span><br><span class="line">75</span><br><span class="line">76</span><br><span class="line">77</span><br><span class="line">78</span><br></pre></td><td class="code"><pre><span class="line">&lt;?php</span><br><span class="line">class Product</span><br><span class="line">&#123;</span><br><span class="line">    private $title;</span><br><span class="line">    private $mainName;</span><br><span class="line">    private $firstName;</span><br><span class="line">    protected $price;</span><br><span class="line"></span><br><span class="line">    public function __construct($title, $firstName, $mainName, $price) &#123;</span><br><span class="line">        $this-&gt;title = $title;</span><br><span class="line">        $this-&gt;firstName = $firstName;</span><br><span class="line">        $this-&gt;mainName = $mainName;</span><br><span class="line">        $this-&gt;price = $price;</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    public function getFirstName() &#123;</span><br><span class="line">        return $this-&gt;firstName;</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    public function getMainName() &#123;</span><br><span class="line">        return $this-&gt;mainName;</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    public function getTitle() &#123;</span><br><span class="line">        return $this-&gt;title;</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    public function getPrice() &#123;</span><br><span class="line">        return $this-&gt;price;</span><br><span class="line">    &#125;</span><br><span class="line">    </span><br><span class="line">    public function getProucer() &#123;</span><br><span class="line">        return &quot;&#123;$this-&gt;firstName&#125; &#123;$this-&gt;mainName&#125;&quot;;</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    public function getSummaryLine() &#123;</span><br><span class="line">        $base = &quot;&#123;$this-&gt;title&#125; ( &#123;$this-&gt;mainName&#125;, &#123;$this-&gt;firstName&#125;)&quot;;</span><br><span class="line">        return $base;</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line">class CDProduct extends Product &#123;</span><br><span class="line">    private $playLength = 0;</span><br><span class="line"></span><br><span class="line">    public function __construct($title, $firstName, $mainName, $price, $playLength) &#123;</span><br><span class="line">        parent::__construct($title, $firstName, $mainName, $price);</span><br><span class="line">        $this-&gt;playLength = $playLength;</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    public function getPlayLength() &#123;</span><br><span class="line">        return $this-&gt;playLength;</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    public function getSummaryLine() &#123;</span><br><span class="line">        $base = parent::getSummaryLine();</span><br><span class="line">        $base .= &quot; : playing time = &#123;$this-&gt;playLength&#125;&quot;;</span><br><span class="line">        return $base;</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line">class BookProduct extends Product &#123;</span><br><span class="line">    private $numPages = 0;</span><br><span class="line"></span><br><span class="line">    public function __construct($title, $firstName, $mainName, $price, $numPages) &#123;</span><br><span class="line">        parent::__construct($title, $firstName, $mainName, $price);</span><br><span class="line">        $this-&gt;numPages = $numPages;</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    public function getNumberOfPages() &#123;</span><br><span class="line">        return $this-&gt;numPages;</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    public function getSummaryLine() &#123;</span><br><span class="line">        $base = parent::getSummaryLine();</span><br><span class="line">        $base .= &quot; : plage count = &#123;$this-&gt;numPages&#125;&quot;;</span><br><span class="line">        return $base;</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<h2 id="多态-polymorphism"><a class="markdownIt-Anchor" href="#多态-polymorphism"></a> 多态 Polymorphism</h2>
<p>多态是来自希腊语的一个术语，原来的意思是“有多种形态”。多态的三大特征：</p>
<ul>
<li>子类继承父类</li>
<li>子类重写父类</li>
<li>父类指向子类</li>
</ul>
<p>多态实现的前提：必须是类与类之间要有关系，要么继承，要么实现，存在重写（override），其实就是抽象函数或接口。<br>
多态的应用：父类对象的引用指向子类对象，其实本质上就是一个向上转型。<br>
多态的好处：大大提高程序的扩展，增强系统的灵活性，降低模块间的耦合。</p>
<p>举个模型例子，一家公司有员工类（Employee），还有其子类：销售（Sales）、市场（Market）、工程师（Engineer）等。某一天老板招待所有的员工开了个短会，完了之后对所有的员工（Employee）说，大家回去工作吧。在这里我们可以认为老板调用了所有员工对象的continueToWork()方法，而不是对一个个员工细说做什么工作，比如对销售部说你去制定销售计划（调用makeSalePlan();），对市场部说你去制定产品的价格（调用makeProductPrice();）….这种逐个细说的方式并不是面向对象，而是面向个体。可以确定的是，员工类应该有一个方法continueToWork()。而员工如何实现他们工作的方法却只有精确到子类才能确定，因为不同的员工的工作方式是不一样的。因此，我们很多时候只需要关心对象的父类型，而忽略更精确的子类型，比如上面老板叫大家回去工作时，他对全体员工说的，主要指的是全体员工类型。<br>
上述的UML图：</p>
<img src="https://ws2.sinaimg.cn/large/006tNc79gy1frwzd3yly0j30li0abdfu.jpg" title="" alt="">
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br></pre></td><td class="code"><pre><span class="line">&lt;?php</span><br><span class="line">abstract class Employee&#123;</span><br><span class="line">    abstract function continueToWork();</span><br><span class="line">&#125;</span><br><span class="line">class Sales extends Employee&#123;</span><br><span class="line">    private function makeSalePlan()&#123;</span><br><span class="line">        echo &quot;make sale plan&quot;;</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    public function continueToWork()&#123;</span><br><span class="line">        $this-&gt;makeSalePlan();</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line">class Market extends Employee&#123;</span><br><span class="line">    private function makeProductPrice()&#123;</span><br><span class="line">        echo &quot;make product price&quot;;</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    public function continueToWork()&#123;</span><br><span class="line">        $this-&gt;makeProductPrice();</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line">class Engineer extends Employee&#123;</span><br><span class="line">    private function makeNewProduct()&#123;</span><br><span class="line">        echo &quot;make new product&quot;;</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    public function continueToWork()&#123;</span><br><span class="line">        $this-&gt;makeNewProduct();</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line">class Demo&#123;</span><br><span class="line">    public function Work($employeeObj)&#123;</span><br><span class="line">        $employeeObj-&gt;continueToWork();</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br><span class="line">//调用</span><br><span class="line">$obj = new Demo();</span><br><span class="line">$obj-&gt;Work(new Sales());</span><br><span class="line">$obj-&gt;Work(new Market());</span><br><span class="line">$obj-&gt;Work(new Engineer());</span><br><span class="line">?&gt;</span><br></pre></td></tr></table></figure>
<h1 id="总结"><a class="markdownIt-Anchor" href="#总结"></a> 总结</h1>
<p>面向对象能将相同的属性封装在一起，同时又能复用很多代码，同时针对不同情况，还能实现多种形态，这就是面向对象的强大之处，有了它我们可以更方便地写出易于管理的代码，但作为初学者，要深刻理解它的三大特点，灵活运用也并非易事。<br>
上课时，老师稍微对一个知识多讲了几遍就觉得不耐烦，觉得自己已经懂了，但自己真正遇到的时候，又觉得自己什么都不懂，书到用时方恨少，学习不能浅尝辄止，蜻蜓点水，要静下心来学习。</p>

      
    </div>
    <footer class="article-footer">
      <a data-url="https://www.xydida.com/2018/6/1/Object-Oriented/rethinking-in-Object-Oriented/" data-id="cl8e0vums00261bcaj2psub0q" class="article-share-link">Share</a>
      
      
  <ul class="article-tag-list"><li class="article-tag-list-item"><a class="article-tag-list-link" href="/tags/Object-Oriented/">Object Oriented</a></li><li class="article-tag-list-item"><a class="article-tag-list-link" href="/tags/PHP/">PHP</a></li></ul>

    </footer>
  </div>
  
</article>


  
    <article id="post-the-autoload-of-php" class="article article-type-post" itemscope itemprop="blogPost">
  <div class="article-meta">
    <a href="/2018/5/31/PHP/the-autoload-of-php/" class="article-date">
  <time datetime="2018-05-31T02:10:15.000Z" itemprop="datePublished">2018-05-31</time>
</a>
    
  <div class="article-category">
    <a class="article-category-link" href="/categories/PHP/">PHP</a>
  </div>

  </div>
  <div class="article-inner">
    
    
      <header class="article-header">
        
  
    <h1 itemprop="name">
      <a class="article-title" href="/2018/5/31/PHP/the-autoload-of-php/">PHP的自动加载机制</a>
    </h1>
  

      </header>
    
    <div class="article-entry" itemprop="articleBody">
      
        <!-- Table of Contents -->
        

        <h1 id="什么是自动加载"><a class="markdownIt-Anchor" href="#什么是自动加载"></a> 什么是自动加载？</h1>
<p>​	顾名思义，就是当我们在使用一个东西的时候，如果这个东西还不存在，于是我们所处的环境就自动帮我们把需要的那个东西拿过来供我们使用，通俗地讲就是这个意思。</p>
<h1 id="php中的自动加载"><a class="markdownIt-Anchor" href="#php中的自动加载"></a> PHP中的自动加载</h1>
<p>​	我们在开始接触PHP时，会先写一个PHP文件，当项目比较大了，就会写好多PHP文件，在不同的PHP文件中，如果要用到其他PHP文件中的内容，比如实例化其他文件中的类，就会使用到<code>require</code>、<code>include</code>等函数。</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br></pre></td><td class="code"><pre><span class="line">// Foo.php</span><br><span class="line">class Foo&#123;</span><br><span class="line">    ...</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line">// Bar.php</span><br><span class="line">require &apos;Foo.php&apos;;</span><br><span class="line"></span><br><span class="line">$foo = new Foo;</span><br></pre></td></tr></table></figure>
<p>​	这种方法看起来很好，确实在一些古老的PHP项目中确实是这样做的，比如ECShop，但一旦这个项目变大，并且还使用了面向对象技术，各种各样的类文件多到很难管理时，<code>require</code>、<code>include</code>等技术还方便吗？</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br></pre></td><td class="code"><pre><span class="line">// index.php</span><br><span class="line">require &apos;A.class.php&apos;;</span><br><span class="line">require &apos;B.class.php&apos;;</span><br><span class="line">require &apos;C.class.php&apos;;</span><br><span class="line">require &apos;D.class.php&apos;;</span><br><span class="line">require &apos;E.class.php&apos;;</span><br><span class="line">...</span><br><span class="line">require &apos;Z.class.php&apos;;</span><br><span class="line"></span><br><span class="line">$a = new A;</span><br><span class="line">$b = new B;</span><br><span class="line">...</span><br><span class="line">...</span><br></pre></td></tr></table></figure>
<p>​	这么多的<code>require</code>，你不会在一个现代PHP框架中见到。那么，在现代PHP中是怎么解决这种问题的呢？</p>
<p>​	在PHP 5以后，PHP拥有了完善的面向对象部分，PHP中使用了autoload技术来解决在一个文件中include多个PHP脚本。</p>
<h2 id="相关技术"><a class="markdownIt-Anchor" href="#相关技术"></a> 相关技术</h2>
<ul>
<li><a href="http://php.net/manual/en/function.autoload.php" target="_blank" rel="noopener">__autoload</a></li>
<li><a href="http://php.net/manual/en/function.spl-autoload.php" target="_blank" rel="noopener">spl_autoload</a></li>
<li><a href="http://php.net/manual/en/function.spl-autoload-register.php" target="_blank" rel="noopener">spl_autoload_register</a></li>
</ul>
<h3 id="_autoload"><a class="markdownIt-Anchor" href="#_autoload"></a> _autoload</h3>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line">/**</span><br><span class="line">* 用于加载未定义的类</span><br><span class="line">* @param $class 需要加载的类名</span><br><span class="line">*/</span><br><span class="line">void __auto(string $class)</span><br></pre></td></tr></table></figure>
<blockquote>
<p>注意：此方法已经在PHP 7.2中标记为<em>DEPRECATED</em>，不建议继续使用</p>
</blockquote>
<h4 id="example"><a class="markdownIt-Anchor" href="#example"></a> Example</h4>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br></pre></td><td class="code"><pre><span class="line">//myClass.php</span><br><span class="line">&lt;?php</span><br><span class="line">class myClass &#123;</span><br><span class="line">    public function __construct() &#123;</span><br><span class="line">        echo &quot;myClass init&apos;ed successfuly!!!&quot;;</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br><span class="line">?&gt;</span><br><span class="line"></span><br><span class="line">// index.php</span><br><span class="line">&lt;?php</span><br><span class="line">function __autoload($classname) &#123;</span><br><span class="line">    $filename = &quot;./&quot;. $classname .&quot;.php&quot;;</span><br><span class="line">    include_once($filename);</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line">$obj = new myClass();	// 输出：myClass init&apos;ed successfuly!!!</span><br><span class="line">?&gt;</span><br></pre></td></tr></table></figure>
<img src="http://p8m3309kb.bkt.clouddn.com/__autoload%20example1.png" title="" alt="">
<p>​	在<code>index.php</code>中我们并没有指明把<code>myClass.php</code>加载进来，但是依然可以实例化<code>myClass</code>对象。</p>
<h3 id="spl_autoload"><a class="markdownIt-Anchor" href="#spl_autoload"></a> spl_autoload</h3>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line">/**</span><br><span class="line">* __autoload()的默认实现</span><br><span class="line">* @param $class_name 需要被实例化的小写类名或命名空间</span><br><span class="line">* @param $file_extensions 文件扩展名，默认为.inc或.php</span><br><span class="line">*/</span><br><span class="line">void spl_autoload ( string $class_name [, string $file_extensions = spl_autoload_extensions() ] )</span><br></pre></td></tr></table></figure>
<p>​	该函数是<code>__autoload()</code>函数的默认实现，如果在调用<code>spl_autoload_register()</code>函数时没有设置任何参数，那么此函数将作为默认加载函数被注册，意思是说如果使用<code>spl_autoload_register()</code>来自动加载时，如果没有指定特殊的加载器，那么将通过<code>spl_autoload()</code>来加载。</p>
<p>​	通常使用该函数时，还需要一些其他的函数配合使用，比如<code>set_include_path()</code>、<code>spl_autoload_extensions()</code>等。</p>
<h4 id="example-2"><a class="markdownIt-Anchor" href="#example-2"></a> Example</h4>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br></pre></td><td class="code"><pre><span class="line">// class/Foo.class.php</span><br><span class="line">class Foo</span><br><span class="line">&#123;</span><br><span class="line">	public function __construct() &#123;</span><br><span class="line">        echo &quot;Foo init successfully!!!&quot;;</span><br><span class="line">	&#125;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line">// index.php</span><br><span class="line">set_include_path(&apos;class/&apos;);</span><br><span class="line">spl_autoload_extensions(&apos;.class.php&apos;);</span><br><span class="line">spl_autoload(&apos;Foo&apos;);</span><br><span class="line"></span><br><span class="line">$foo = new Foo;</span><br></pre></td></tr></table></figure>
<img src="http://p8m3309kb.bkt.clouddn.com/spl_autoload%20example1.png" title="" alt="">
<p>​	可以看到，在<code>spl_autoload()</code>中不能对传过来的<code>class_name</code>做一些判断或修改，需要配合其他函数来设置，此时如果想要在自动加载时做一些判断修改，只能使用<code>__autoload()</code>或者下面的<code>spl_autoload_register()</code>。</p>
<h3 id="spl_autoload_register"><a class="markdownIt-Anchor" href="#spl_autoload_register"></a> spl_autoload_register</h3>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><span class="line">/**</span><br><span class="line">* 注册一个自动加载器，这个注册的加载器可以替换__autoload()</span><br><span class="line">* @param $autoload_function 需要被注册的自动加载函数，如果没有指定，会将spl_autoload()函数注册</span><br><span class="line">* @param $throw 是否允许函数抛出异常，默认为true</span><br><span class="line">* @param $prepend 是否将这个函数加载器放在队列的最前面，默认为false</span><br><span class="line">* @return bool</span><br><span class="line">*/</span><br><span class="line">bool spl_autoload_register([ callable $autoload_function [, bool $throw = TRUE [, bool $prepend = FALSE ]]])</span><br></pre></td></tr></table></figure>
<p>​	此函数可以可以注册一个带有<code>spl __autoload</code>队列的函数，并且将会启用这个队列。</p>
<h4 id="example-3"><a class="markdownIt-Anchor" href="#example-3"></a> Example</h4>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br></pre></td><td class="code"><pre><span class="line">// class/Foo.class.php</span><br><span class="line">class Foo</span><br><span class="line">&#123;</span><br><span class="line">	public function __construct() &#123;</span><br><span class="line">        echo &quot;Foo init successfully by spl_autoload_register!!!&quot;;</span><br><span class="line">	&#125;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line">// index.php</span><br><span class="line">// 自定义一个加载器，再加载器中可以对参数$class 做一些判断</span><br><span class="line">function my_autoloader($class) &#123;</span><br><span class="line">    include &apos;classes/&apos; . $class . &apos;.class.php&apos;;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line">spl_autoload_register(&apos;my_autoloader&apos;);</span><br><span class="line">// 或者使用一个匿名函数作为加载器</span><br><span class="line">spl_autoload_register(function ($class) &#123;</span><br><span class="line">    include &apos;class/&apos; . $class . &apos;.class.php&apos;;</span><br><span class="line">&#125;);</span><br><span class="line"></span><br><span class="line">$foo = new Foo;</span><br></pre></td></tr></table></figure>
<img src="http://p8m3309kb.bkt.clouddn.com/spl_autoload_register%20example1.png" title="" alt="">
<p>通过命令空间来注册：</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br></pre></td><td class="code"><pre><span class="line">// index.php</span><br><span class="line">namespace Foobar;</span><br><span class="line"></span><br><span class="line">class Foo &#123;</span><br><span class="line">    static public function test($class) &#123;</span><br><span class="line">        echo $class . &quot; autoloaded by namespace&quot;;</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line">spl_autoload_register(__NAMESPACE__ .&apos;\Foo::test&apos;);</span><br><span class="line"></span><br><span class="line">new AClass;</span><br></pre></td></tr></table></figure>
<img src="http://p8m3309kb.bkt.clouddn.com/spl_autoload_register%20example2.png" title="" alt="">
<p>​	学了这么多，我们知道了什么是自动加载技术。再来回到文章开头，那个不存在的东西就是我们将要实例化的类，我们所处的环境就是PHP这个环境，自动把没有的东西拿过来给我们用就是使用以上技术加载所需要的类文件，以供我们实例化所需。</p>
<h2 id="laravel中的自动加载"><a class="markdownIt-Anchor" href="#laravel中的自动加载"></a> Laravel中的自动加载</h2>
<h4 id="从nginx的配置文件说起"><a class="markdownIt-Anchor" href="#从nginx的配置文件说起"></a> 从Nginx的配置文件说起</h4>
<p>官方建议的Nginx服务配置：</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br></pre></td><td class="code"><pre><span class="line">server &#123;</span><br><span class="line">    listen 80;</span><br><span class="line">    server_name example.com;</span><br><span class="line">    root /example.com/public;</span><br><span class="line"></span><br><span class="line">    add_header X-Frame-Options &quot;SAMEORIGIN&quot;;   </span><br><span class="line">    add_header X-XSS-Protection &quot;1; mode=block&quot;; </span><br><span class="line">    add_header X-Content-Type-Options &quot;nosniff&quot;; </span><br><span class="line"></span><br><span class="line">    index index.html index.htm index.php;</span><br><span class="line"></span><br><span class="line">    charset utf-8;</span><br><span class="line"></span><br><span class="line">    location / &#123;</span><br><span class="line">        try_files $uri $uri/ /index.php?$query_string;</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    location = /favicon.ico &#123; access_log off; log_not_found off; &#125;  </span><br><span class="line">    location = /robots.txt  &#123; access_log off; log_not_found off; &#125;  </span><br><span class="line"></span><br><span class="line">    error_page 404 /index.php;</span><br><span class="line"></span><br><span class="line">    location ~ \.php$ &#123;</span><br><span class="line">        fastcgi_split_path_info ^(.+\.php)(/.+)$;</span><br><span class="line">        fastcgi_pass unix:/var/run/php/php7.1-fpm.sock;</span><br><span class="line">        fastcgi_index index.php;</span><br><span class="line">        include fastcgi_params;</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    location ~ /\.(?!well-known).* &#123;</span><br><span class="line">        deny all;</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<p>关于该配置为详细说明，就不在此说了，有兴趣的可以查看这篇文章：<a href="https://segmentfault.com/a/1190000011404105" target="_blank" rel="noopener">Laravel 5.5 官方推荐 Nginx 配置学习</a> 。从配置文件中发现Laravel项目的入口文件是<code>public/index.php</code>，于是，就从该文件开始分析。</p>
<p>public/index.php文件中：</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br></pre></td><td class="code"><pre><span class="line">/*</span><br><span class="line">|--------------------------------------------------------------------------</span><br><span class="line">| Register The Auto Loader</span><br><span class="line">|--------------------------------------------------------------------------</span><br><span class="line">|</span><br><span class="line">| Composer provides a convenient, automatically generated class loader for</span><br><span class="line">| our application. We just need to utilize it! We&apos;ll simply require it</span><br><span class="line">| into the script here so that we don&apos;t have to worry about manual</span><br><span class="line">| loading any of our classes later on. It feels nice to relax.</span><br><span class="line">|</span><br><span class="line">*/</span><br><span class="line"></span><br><span class="line">require __DIR__.&apos;/../bootstrap/autoload.php&apos;;</span><br></pre></td></tr></table></figure>
<p>可以看到，在入口文件中引入了<code>bootstrap/autoload.php</code>这个文件，根据文件名可以大致猜出和自动加载有点关系，而且看注释，就是使用了<code>Composer</code>的自动加载，因为Laravel本身会从<code>vendor</code>目录引用很多第三方库，继续看<code>bootstrap/autoload.php</code>。</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br></pre></td><td class="code"><pre><span class="line">/*</span><br><span class="line">|--------------------------------------------------------------------------</span><br><span class="line">| Register The Composer Auto Loader</span><br><span class="line">|--------------------------------------------------------------------------</span><br><span class="line">|</span><br><span class="line">| Composer provides a convenient, automatically generated class loader</span><br><span class="line">| for our application. We just need to utilize it! We&apos;ll require it</span><br><span class="line">| into the script here so that we do not have to worry about the</span><br><span class="line">| loading of any our classes &quot;manually&quot;. Feels great to relax.</span><br><span class="line">|</span><br><span class="line">*/</span><br><span class="line"></span><br><span class="line">require __DIR__.&apos;/../vendor/autoload.php&apos;;</span><br></pre></td></tr></table></figure>
<p>在<code>bootstrap/autoload.php</code>文件中引入了<code>vendor/autoload.php</code>，<code>vendor/</code>里面保存的是第三方库，继续查看<code>vendor/autoload.php</code>。</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line">&lt;?php</span><br><span class="line"></span><br><span class="line">// autoload.php @generated by Composer</span><br><span class="line"></span><br><span class="line">require_once __DIR__ . &apos;/composer/autoload_real.php&apos;;</span><br><span class="line"></span><br><span class="line">return ComposerAutoloaderInit9794f3f3ddfd00f32b75ea45e287b507::getLoader();</span><br></pre></td></tr></table></figure>
<p>只有两行代码，一个是引入<code>vendor/composer/autoload_real.php</code>，最后调用<code>ComposerAutoloaderInit9794f3f3ddfd00f32b75ea45e287b507::getLoader()</code>返回，看到这里知道既然从这里返回，那么<code>getLoader()</code>方法里面肯定做了一些自动加载的事情。查看该方法。</p>
<img src="http://p8m3309kb.bkt.clouddn.com/getLoader%20function.png" title="" alt="">
<p>这是一个静态方法，首先检查静态属性loader是否被实例化，如果已经实例化了则直接返回，否则继续执行下面的代码，很明显这是一个单例模式，Laravel项目中每次只保留一个loader。接下来就用到了<code>spl_autoload_register()</code>函数：</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line">// 注册loadClassLoader加载器</span><br><span class="line">spl_autoload_register(array(&apos;ComposerAutoloaderInit9794f3f3ddfd00f32b75ea45e287b507&apos;, &apos;loadClassLoader&apos;), true, true);</span><br><span class="line">// 创建一个loadClassLoader实例</span><br><span class="line">self::$loader = $loader = new \Composer\Autoload\ClassLoader();</span><br></pre></td></tr></table></figure>
<p>可以看到，先是注册了一个函数名叫<code>loadClassLoader</code>的加载器，再通过这个加载器开始类的加载。看一下这个加载器的实现：</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line">public static function loadClassLoader($class)</span><br><span class="line">&#123;</span><br><span class="line">    if (&apos;Composer\Autoload\ClassLoader&apos; === $class) &#123;</span><br><span class="line">        require __DIR__ . &apos;/ClassLoader.php&apos;;</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<p>很简单，就是判断要加载的不是<code>Composer\Autoload\ClassLoader</code>这个类，如果是就引入该类，否则什么也不做，这就是自动加载。</p>
<p>我们来检验一下，分析的是否正确，修改<code>loadClassLoader()</code>函数如下：</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br></pre></td><td class="code"><pre><span class="line">public static function loadClassLoader($class)</span><br><span class="line">&#123;</span><br><span class="line">	// 引入Foo这个类</span><br><span class="line">    if (&apos;Foo&apos; === $class) &#123;</span><br><span class="line">        echo &apos;Foo from loadClassLoader&apos;;</span><br><span class="line">        exit();</span><br><span class="line">    &#125;</span><br><span class="line">    if (&apos;Composer\Autoload\ClassLoader&apos; === $class) &#123;</span><br><span class="line">         require __DIR__ . &apos;/ClassLoader.php&apos;;</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<p>在<code>getLoader()</code>中添加一段代码：</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br></pre></td><td class="code"><pre><span class="line">public static function getLoader()</span><br><span class="line">&#123;</span><br><span class="line">    // 单例模式</span><br><span class="line">    if (null !== self::$loader) &#123;</span><br><span class="line">        return self::$loader;</span><br><span class="line">    &#125;</span><br><span class="line">    // 注册loadClassLoader加载器</span><br><span class="line">    spl_autoload_register(array(&apos;ComposerAutoloaderInit9794f3f3ddfd00f32b75ea45e287b507&apos;, &apos;loadClassLoader&apos;), true, true);</span><br><span class="line">    // 创建一个loadClassLoader实例</span><br><span class="line">    self::$loader = $loader = new \Composer\Autoload\ClassLoader();</span><br><span class="line">    // 创建为定义的类的实例</span><br><span class="line">    $foo = new Foo;</span><br><span class="line">...</span><br></pre></td></tr></table></figure>
<p>运行结果如下：</p>
<img src="http://p8m3309kb.bkt.clouddn.com/load%20undefined%20class%20foo.png" title="" alt="">
<p>运行结果和我们猜想的一样。</p>
<h2 id="总结"><a class="markdownIt-Anchor" href="#总结"></a> 总结</h2>
<p>​	学习了PHP自动加载技术，发现其实一点也不神奇，主要就是依靠<code>spl_autoload_register()</code>和<code>spl_autoload()</code>函数，底层还是使用了<code>include</code>的方式，所谓的自动，只是不需要我们每次都在PHP文件的顶部写很多<code>include</code>命令，只要把使用了自动加载函数的文件引入进来，当执行到未定义的类时，就会自动引入相关的类文件。为达到效果，其实也完全可以用一个循环来引入所需要的类，只是在循环引用前，需要把类名和类所在的文件做一个映射，但这样做完全没有使用自动加载函数来的优雅，而且还不灵活，还没有使用到命名空间。</p>
<p>参考：<a href="http://php.net/manual/en/language.oop5.autoload.php" target="_blank" rel="noopener">http://php.net/manual/en/language.oop5.autoload.php</a></p>

      
    </div>
    <footer class="article-footer">
      <a data-url="https://www.xydida.com/2018/5/31/PHP/the-autoload-of-php/" data-id="cl8e0vumz002e1bcaqsitv0vj" class="article-share-link">Share</a>
      
      
  <ul class="article-tag-list"><li class="article-tag-list-item"><a class="article-tag-list-link" href="/tags/PHP/">PHP</a></li><li class="article-tag-list-item"><a class="article-tag-list-link" href="/tags/autoload/">autoload</a></li></ul>

    </footer>
  </div>
  
</article>


  
    <article id="post-Use-screen-to-manage-your-remote-session" class="article article-type-post" itemscope itemprop="blogPost">
  <div class="article-meta">
    <a href="/2018/5/15/Linux/Use-screen-to-manage-your-remote-session/" class="article-date">
  <time datetime="2018-05-15T09:33:36.000Z" itemprop="datePublished">2018-05-15</time>
</a>
    
  <div class="article-category">
    <a class="article-category-link" href="/categories/Linux/">Linux</a>
  </div>

  </div>
  <div class="article-inner">
    
    
      <header class="article-header">
        
  
    <h1 itemprop="name">
      <a class="article-title" href="/2018/5/15/Linux/Use-screen-to-manage-your-remote-session/">使用Screen管理远程回话</a>
    </h1>
  

      </header>
    
    <div class="article-entry" itemprop="articleBody">
      
        <p>​	在本地开发时，经常需要使用远程连接到Linux服务器，一开始我自己都是有几个远程就开几个SSH窗口，这种方法很原始很直接，但每次都受够了密码输入，即使用了SSH免密码登录，也会觉得每次输入SSH的命令一点都不快速，况且况且窗口开多了，也会很混乱，不易管理，这种情况，Linux上的工具也有很多，今天就学习一下<code>screen</code>工具。</p>
<p>​	在介绍<code>screen</code>工具时，先讨论一下，为什么连接服务器后，当执行长时间的任务时，我们关闭远程连接窗口，这个任务就被杀掉了呢？</p>
<h3 id="元凶sigup信号"><a class="markdownIt-Anchor" href="#元凶sigup信号"></a> 元凶：SIGUP信号</h3>
<p>​	在Linux／Unix中，有以下几个概念：</p>
        
          <p class="article-more-link">
            <a href="/2018/5/15/Linux/Use-screen-to-manage-your-remote-session/#more">Read More</a>
          </p>
        
      
    </div>
    <footer class="article-footer">
      <a data-url="https://www.xydida.com/2018/5/15/Linux/Use-screen-to-manage-your-remote-session/" data-id="cl8e0vuly00151bca5zj4nya6" class="article-share-link">Share</a>
      
      
  <ul class="article-tag-list"><li class="article-tag-list-item"><a class="article-tag-list-link" href="/tags/Linux/">Linux</a></li><li class="article-tag-list-item"><a class="article-tag-list-link" href="/tags/Server/">Server</a></li></ul>

    </footer>
  </div>
  
</article>


  
    <article id="post-Routing-Selection" class="article article-type-post" itemscope itemprop="blogPost">
  <div class="article-meta">
    <a href="/2018/5/14/Networks/Routing-Selection/" class="article-date">
  <time datetime="2018-05-14T09:32:37.000Z" itemprop="datePublished">2018-05-14</time>
</a>
    
  <div class="article-category">
    <a class="article-category-link" href="/categories/Networks/">Networks</a>
  </div>

  </div>
  <div class="article-inner">
    
    
      <header class="article-header">
        
  
    <h1 itemprop="name">
      <a class="article-title" href="/2018/5/14/Networks/Routing-Selection/">IP中的路由选择</a>
    </h1>
  

      </header>
    
    <div class="article-entry" itemprop="articleBody">
      
        <!-- Table of Contents -->
        

        <img src="http://p8m3309kb.bkt.clouddn.com/%E5%B0%8F%E5%9E%8B%E7%BD%91%E7%BB%9C.png" title="" alt="一个小型网络">
<p>​	网络这个东西是很复杂得，像一张蜘蛛网一样，将每一台通信设备连在一起，在上图中，工作站A想要访问工作站C，有不止一条路可以走，在现实中可能这样的路有非常多，这些路有远有近，有快的有慢得，那么在连接网络时，设备是如何知道哪一条路是最优的呢？通常，通信设备中都会有一个路由表（Routing Table），其实就是一张二维表格，记录着这台设备如果要去某个地方需要线通过哪些设备中转。</p>
<p>​	下面是我本机（mac系统）中的路由表（只是部分截图），不光是路由器，每个接入网络的设备都会有路由表：</p>
<img src="http://p8m3309kb.bkt.clouddn.com/netstate%20-rn.png" title="" alt="netstat -rn命令">
<p>​	上图是一张典型的主机路由表，执行<code>netstate</code>命令，<code>-r</code>选项是列出路由表，<code>-n</code>选项是以数字格式打印出IP地址（默认情况会打印网络名加主机名），本机的路由表大致由7列组成，下面介绍一下每一列的作用：</p>
<ul>
<li>Destination：目标网络地址；</li>
<li>Gateway：网关地址，要去目标网络，需要先走这条路；</li>
<li>Flags：此条路由记录的标志，可以设置的标志大致有：
<ol>
<li>U Up，该路由可以被使用；</li>
<li>G Gateway，该路由是到一个网关（路由器），如果没有设置该标志，说明该条路由不是一个网关，是一条直接路由，Gateway列给出的是外出接口的IP地址；</li>
<li>H Host，该路由是到一个主机，即Destination列给出的是一个完整的主机地址，如果没有设置该标志，说明该路由是到一个网络，而Destination列出的是一个网络地址：一个网络号，或者网络号与子网号的组合；</li>
<li>D Dynamically，该路由是由ICMP重定向报文创建的；</li>
<li>M Modified，该路由已被重定向报文修改；</li>
</ol>
</li>
<li>Refs：正在使用该路由的活动进程个数，面向连接的协议如TCP在建立连接时需要固定路由，如果我们用Telnet连接<code>10.158.51.78</code>，它的值将增加1；</li>
<li>Use：通过该路由发送的分组数；</li>
<li>Netif：该记录使用的网络接口;</li>
<li>Expire：该记录过期时间。</li>
</ul>
<p>​	标志G是非常重要的，因为它区分了直接路由和间接路由（对于直接路由来说没有标志G）。间接和直接路由的区别在于，发往直接路由的分组中不但具有指明目的端的IP地址，还具有链路层地址，可以理解为数据报中的目的IP地址和链路层目的地址是一样的。当分组被发往一个间接路由时，IP地址指明的是最终的目的地，但是链路层地址指明的是网关（即下一站路由器），可以理解为可以理解为数据报中的目的IP地址和链路层目的地址是不一样的。</p>
<p>​	标志G和H之间的区别：都代表通行设备，不过功能不一样，G标志区分了直接路由和间接路由，而H标志表明目的地址是一个完整的主机地址。若没有设置H标志，则说明目的地只是一个网络地址（主机号部分为0）。当为某个目的IP地址搜索路由表时，主机地址项必须与目的地址完全匹配，而网络地址项只需要匹配目的地址的网络号和子网号。</p>
<h2 id="路由算法"><a class="markdownIt-Anchor" href="#路由算法"></a> 路由算法</h2>
<h3 id="静态路由选择策略"><a class="markdownIt-Anchor" href="#静态路由选择策略"></a> 静态路由选择策略</h3>
<p>​	静态路由选择策略即非自适应路由选择，只在交换机启动时计算和交换路由，此后路由不再改变。特点是简单并且开销较小，但不能及时适应网络状态的变化。具体可以分为以下三种：</p>
<ol>
<li>
<p>扩散式路由选择</p>
<p>一个网络节点从A线路收到分组后，立即把分组发向除A线路外的所有其他输出线路上，任何节点只接受最先到达的报文分组，不接受重复报文。适用于规模较小，对可靠性、健壮性要求很高的场合，还可被用于分发信息、判断可达性、寻找最短路径等。</p>
</li>
<li>
<p>固定路由选择</p>
<p>所有网络节点都保存一张路由表，路由表中记录着所有为了到达某个目的节点而选择的下一个节点或链路，并不记录到该目的节点的所有中间节点。所以当一个分组到达节点时，只需要在查找这个路由表查找到对应的下一个节点，并发送分组。因为所有的路由都保存在一张表中，所以很简单，适合于一个负载稳定拓扑变化不大的网络中运行，但灵活度很差，无法对网络的拥塞和故障做出及时地反映。</p>
</li>
<li>
<p>随即路由选择</p>
<p>当分组到达某节点后，随意选择一条线路进行分组转发。随即选择的路由不一定是最佳路由，增加了不必要的负载，而且分组传播延迟不可预期。</p>
</li>
</ol>
<h3 id="动态路由选择策略"><a class="markdownIt-Anchor" href="#动态路由选择策略"></a> 动态路由选择策略</h3>
<p>​	动态路由选择策略即自适应路由选择，在交换机启动时进行初始化，当网络发生阻塞或故障时能够随时进行更新。</p>
<ol>
<li>
<p>孤立路由选择</p>
<p>每个节点并不利用其他节点来的网络信息，仅根据本节点看到的信息来确定路由。最短等待法，将具有最短队列的链路作为最好路由你想学习算法（backward learning），将逆向的路由节点数最少的链路作为最好路由。</p>
</li>
<li>
<p>集中路由选择</p>
<p>和固定路由选择一样，所有节点都保存一张路由表，和固定路由的区别在于固定路由算法中路由表的建立是手工完成的，而集中路由选择中路由表的建立是由网络中设置的一个路由控制中心RCC来几种完成的（收集、计算、分发）。缺点：离RCC较近的地方通信量的开销比较大，因为要周期性地从所有节点手机网络的状态信息的报告，同时还要生成路由表并从RCC发送到网内的所有节点；另一个是可靠性问题，一旦RCC出现故障，则整个网络就失去控制。</p>
</li>
<li>
<p>分布路由选择</p>
<p>根据来自于相邻节点的信息，并通过一个最短花费路由算法计算出到每个目的地的路由。</p>
</li>
</ol>
<h4 id="动态路由选择中常用的两种算法"><a class="markdownIt-Anchor" href="#动态路由选择中常用的两种算法"></a> 动态路由选择中常用的两种算法：</h4>
<ol>
<li>
<p>距离向量路由协议（Distance Vector Routing，DVR）</p>
</li>
<li>
<p>链路状态路由协议（Link State Routing）</p>
</li>
</ol>
<p>​	路由选择是个非常复杂的问题，它既要 网络中所有节点协同工作，也需要路由选择适应环境的不断变化，并且这种变化是事先无法知道的，比如节点故障、网络拥塞等。</p>
<p>参考：《TCP／IP详解 卷1:协议》</p>

      
    </div>
    <footer class="article-footer">
      <a data-url="https://www.xydida.com/2018/5/14/Networks/Routing-Selection/" data-id="cl8e0vuli000w1bcai8wy2p4q" class="article-share-link">Share</a>
      
      
  <ul class="article-tag-list"><li class="article-tag-list-item"><a class="article-tag-list-link" href="/tags/networks/">networks</a></li><li class="article-tag-list-item"><a class="article-tag-list-link" href="/tags/routing/">routing</a></li></ul>

    </footer>
  </div>
  
</article>


  
    <article id="post-Base-configuration-for-a-new-server" class="article article-type-post" itemscope itemprop="blogPost">
  <div class="article-meta">
    <a href="/2018/2/4/Devops/Base-configuration-for-a-new-server/" class="article-date">
  <time datetime="2018-02-04T12:03:02.000Z" itemprop="datePublished">2018-02-04</time>
</a>
    
  <div class="article-category">
    <a class="article-category-link" href="/categories/Devops/">Devops</a>
  </div>

  </div>
  <div class="article-inner">
    
    
      <header class="article-header">
        
  
    <h1 itemprop="name">
      <a class="article-title" href="/2018/2/4/Devops/Base-configuration-for-a-new-server/">对一台新服务器的简单的配置</a>
    </h1>
  

      </header>
    
    <div class="article-entry" itemprop="articleBody">
      
        <!-- Table of Contents -->
        

        <img src="https://i.loli.net/2021/05/06/6FGAHLE3hySDuvo.png" title="" alt="2650331-494786b4facec3e0">
<p>虽然不是专业的系统管理员，作为程序员还是会经常折腾一些VPS，势必要学会怎么配置一台服务器，而且，对于公司面试，掌握基本的系统管理知识还是有利的。况且，如今的网络安全环境下，掌握一些服务器安全方面的配置是非常有必要的。</p>
<h2 id="1-远程登录用户"><a class="markdownIt-Anchor" href="#1-远程登录用户"></a> 1. 远程登录用户</h2>
<p>在使用SSH远程登录时，由于root用户有着无限的权利，它能执行任何命令，所以尽量不要使用root用户登录。</p>
<h6 id="ubuntu"><a class="markdownIt-Anchor" href="#ubuntu"></a> Ubuntu</h6>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">adduser jack  //创建非根用户</span><br><span class="line">usermod -a -G sudo jack  // 让jack用户拥有sudo权限(即通过密码认证后可以执行特殊的权限的命令)</span><br></pre></td></tr></table></figure>
<h6 id="centos"><a class="markdownIt-Anchor" href="#centos"></a> CentOS</h6>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">adduser jack</span><br><span class="line">passwd jack  // 为jack用户设置密码</span><br><span class="line">usermod -a -G wheel jack  // 把jack加入wheel用户组</span><br></pre></td></tr></table></figure>
<h2 id="2-ssh密钥对认证"><a class="markdownIt-Anchor" href="#2-ssh密钥对认证"></a> 2. SSH密钥对认证</h2>
<p>上面创建完jack用户后，就可以执行下面的命令登录：</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">ssh jack@123.123.78.90</span><br></pre></td></tr></table></figure>
<p>此时，会要求你输入jack的密码，但密码认证也有漏洞，而且会受到暴力破解，不怀好意的人会不断尝试猜测你的密码，而且，每次登录时都要求你输入密码，是不是很麻烦呢？这时我们就需要创建SSH密码对认证（所谓密钥对，就是一对“密钥”，其中一个是私钥，保存在自己的电脑中，另一个是公钥，保存在服务器中，公钥加密的消息只能使用对应的私钥解密）。</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">ssh-keygen  // 创建密钥对</span><br></pre></td></tr></table></figure>
<p>然后按照屏幕提示输入所需要的信息，这个命令会在电脑创建两个文件：<code>~/.ssh/id_rsa.pub(公钥)</code>和<code>~/.ssh/id.rsa(私钥)</code>，私钥应该保存在本地电脑中，公钥上传到服务器。</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">// 把公钥上传到服务器中jack用户的家目录，后面一定要有&quot;:&quot;</span><br><span class="line">sup ~/.ssh/id_rsa.pub jack@123.123.78.90:</span><br></pre></td></tr></table></figure>
<p>登录服务器，创建.ssh目录：</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">mkdir ~/.ssh</span><br></pre></td></tr></table></figure>
<p>创建~/.ssh/authorized_keys文件，这个文件的内容是一系列允许登录这台服务器的公钥：</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">touch ~/.ssh/authorized_keys</span><br></pre></td></tr></table></figure>
<p>把上传的公钥添加到~/.ssh/authorized_keys文件中：</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">cat ~/id_rsa.pub &gt;&gt; ~/.ssh/authorized_keys</span><br></pre></td></tr></table></figure>
<p>最后修改下面几个目录和文件的访问权限，让jack用户访问<sub>/.ssh目录和</sub>/.ssh/ahthorized_keys文件：</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">chown -R jack:jack ~/.ssh</span><br><span class="line">chmod 700 ~/.ssh</span><br><span class="line">chmod 600 ~/.ssh/authorized_keys</span><br></pre></td></tr></table></figure>
<h2 id="禁用密码和根用户登录"><a class="markdownIt-Anchor" href="#禁用密码和根用户登录"></a> 禁用密码和根用户登录</h2>
<p>为了让服务器再安全一些，我们要禁止用户通过密码登录，还要禁止根用户登录。</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">vim /etc/ssh/sshd_config</span><br></pre></td></tr></table></figure>
<p>上打开的配置文件中，这样修改：</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">// /etc/ssh/sshd_config</span><br><span class="line">PasswordAuthentication no // 或者注释掉</span><br><span class="line">PermitRootLogin     no      // 或者注释掉</span><br></pre></td></tr></table></figure>
<p>顺便解决下<code>ssh</code>自动断开的问题：</p>
<figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">// /etc/ssh/sshd_config</span><br><span class="line">ClientAliveInterval 30 # 表示每30秒服务器向客户端发起一次心跳，如果客户端响应就保持连接</span><br><span class="line">ClientAliveCountMax 5  # 如果连续5服务器收不到心跳，就断开连接</span><br></pre></td></tr></table></figure>
<p>改动之后，重启ssh服务：</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line"># ubuntu</span><br><span class="line">sudo service ssh restart</span><br><span class="line"></span><br><span class="line"># CentOS</span><br><span class="line">sudo systemctl restart sshd.service</span><br></pre></td></tr></table></figure>
<p>运行完上面的命令，我们的服务器就安全很多了。</p>
<hr>
<p>欢迎阅读本篇文章，如有兴趣可以关注博主公众号哦：</p>
<img src="https://i.loli.net/2020/09/20/SYRsd7hOGkxiuCQ.jpg" style="zoom:28%;">

      
    </div>
    <footer class="article-footer">
      <a data-url="https://www.xydida.com/2018/2/4/Devops/Base-configuration-for-a-new-server/" data-id="cl8e0vukf000b1bca1j6dnbzf" class="article-share-link">Share</a>
      
      
  <ul class="article-tag-list"><li class="article-tag-list-item"><a class="article-tag-list-link" href="/tags/PHP/">PHP</a></li><li class="article-tag-list-item"><a class="article-tag-list-link" href="/tags/Server/">Server</a></li></ul>

    </footer>
  </div>
  
</article>


  


  <nav id="page-nav">
    <a class="extend prev" rel="prev" href="/page/16/">&laquo;Prev</a><a class="page-number" href="/">1</a><span class="space">&hellip;</span><a class="page-number" href="/page/15/">15</a><a class="page-number" href="/page/16/">16</a><span class="page-number current">17</span><a class="page-number" href="/page/18/">18</a><a class="extend next" rel="next" href="/page/18/">Next&raquo;</a>
  </nav>

</section>
        
          <aside id="sidebar">
  
    
  <div class="widget-wrap">
    <h3 class="widget-title">Categories</h3>
    <div class="widget">
      <ul class="category-list"><li class="category-list-item"><a class="category-list-link" href="/categories/Algorithm/">Algorithm</a><span class="category-list-count">2</span></li><li class="category-list-item"><a class="category-list-link" href="/categories/Artificial-Intelligence/">Artificial Intelligence</a><span class="category-list-count">1</span></li><li class="category-list-item"><a class="category-list-link" href="/categories/ComputerVision/">ComputerVision</a><span class="category-list-count">3</span></li><li class="category-list-item"><a class="category-list-link" href="/categories/DSP/">DSP</a><span class="category-list-count">1</span></li><li class="category-list-item"><a class="category-list-link" href="/categories/Deep-learning/">Deep learning</a><span class="category-list-count">1</span></li><li class="category-list-item"><a class="category-list-link" href="/categories/Devops/">Devops</a><span class="category-list-count">2</span></li><li class="category-list-item"><a class="category-list-link" href="/categories/Electron/">Electron</a><span class="category-list-count">2</span></li><li class="category-list-item"><a class="category-list-link" href="/categories/Life/">Life</a><span class="category-list-count">3</span></li><li class="category-list-item"><a class="category-list-link" href="/categories/Linux/">Linux</a><span class="category-list-count">7</span></li><li class="category-list-item"><a class="category-list-link" href="/categories/MySQL/">MySQL</a><span class="category-list-count">1</span></li><li class="category-list-item"><a class="category-list-link" href="/categories/Networks/">Networks</a><span class="category-list-count">2</span></li><li class="category-list-item"><a class="category-list-link" href="/categories/Neural-Network/">Neural Network</a><span class="category-list-count">1</span></li><li class="category-list-item"><a class="category-list-link" href="/categories/Object-Oriented/">Object Oriented</a><span class="category-list-count">1</span></li><li class="category-list-item"><a class="category-list-link" href="/categories/PHP/">PHP</a><span class="category-list-count">19</span></li><li class="category-list-item"><a class="category-list-link" href="/categories/Programming-Language/">Programming Language</a><span class="category-list-count">1</span></li><li class="category-list-item"><a class="category-list-link" href="/categories/Python/">Python</a><span class="category-list-count">1</span></li><li class="category-list-item"><a class="category-list-link" href="/categories/Reading/">Reading</a><span class="category-list-count">1</span></li><li class="category-list-item"><a class="category-list-link" href="/categories/Regular-Expression/">Regular Expression</a><span class="category-list-count">1</span></li><li class="category-list-item"><a class="category-list-link" href="/categories/Tools/">Tools</a><span class="category-list-count">3</span></li><li class="category-list-item"><a class="category-list-link" href="/categories/VPS/">VPS</a><span class="category-list-count">1</span></li><li class="category-list-item"><a class="category-list-link" href="/categories/Yangmao/">Yangmao</a><span class="category-list-count">1</span></li><li class="category-list-item"><a class="category-list-link" href="/categories/frontend/">frontend</a><span class="category-list-count">10</span></li><li class="category-list-item"><a class="category-list-link" href="/categories/macOS/">macOS</a><span class="category-list-count">1</span></li><li class="category-list-item"><a class="category-list-link" href="/categories/notes/">notes</a><span class="category-list-count">8</span></li><li class="category-list-item"><a class="category-list-link" href="/categories/reading/">reading</a><span class="category-list-count">3</span></li><li class="category-list-item"><a class="category-list-link" href="/categories/小程序/">小程序</a><span class="category-list-count">7</span></li><li class="category-list-item"><a class="category-list-link" href="/categories/微信/">微信</a><span class="category-list-count">1</span></li><li class="category-list-item"><a class="category-list-link" href="/categories/设计/">设计</a><span class="category-list-count">1</span></li></ul>
    </div>
  </div>


  
    
  <div class="widget-wrap">
    <h3 class="widget-title">Tag Cloud</h3>
    <div class="widget tagcloud">
      <a href="/tags/2021/" style="font-size: 10px;">2021</a> <a href="/tags/AI/" style="font-size: 10px;">AI</a> <a href="/tags/API/" style="font-size: 13.33px;">API</a> <a href="/tags/Artificial-Intelligence/" style="font-size: 13.33px;">Artificial Intelligence</a> <a href="/tags/Big-Sur/" style="font-size: 10px;">Big Sur</a> <a href="/tags/C/" style="font-size: 10px;">C#</a> <a href="/tags/CSS/" style="font-size: 16.67px;">CSS</a> <a href="/tags/DIGITS/" style="font-size: 10px;">DIGITS</a> <a href="/tags/DNS/" style="font-size: 10px;">DNS</a> <a href="/tags/DSP/" style="font-size: 10px;">DSP</a> <a href="/tags/Digital-pathology/" style="font-size: 10px;">Digital pathology</a> <a href="/tags/Eloquent/" style="font-size: 10px;">Eloquent</a> <a href="/tags/Ethics/" style="font-size: 10px;">Ethics</a> <a href="/tags/Go/" style="font-size: 10px;">Go</a> <a href="/tags/Java/" style="font-size: 10px;">Java</a> <a href="/tags/Javascript/" style="font-size: 13.33px;">Javascript</a> <a href="/tags/Laravel/" style="font-size: 11.67px;">Laravel</a> <a href="/tags/LeNet/" style="font-size: 10px;">LeNet</a> <a href="/tags/Linux/" style="font-size: 16.67px;">Linux</a> <a href="/tags/Lloyds-bank/" style="font-size: 10px;">Lloyds bank</a> <a href="/tags/Lumen/" style="font-size: 10px;">Lumen</a> <a href="/tags/MNIST/" style="font-size: 10px;">MNIST</a> <a href="/tags/Matlab/" style="font-size: 10px;">Matlab</a> <a href="/tags/MySQL/" style="font-size: 11.67px;">MySQL</a> <a href="/tags/Nginx/" style="font-size: 10px;">Nginx</a> <a href="/tags/Object-Oriented/" style="font-size: 10px;">Object Oriented</a> <a href="/tags/Objective-C/" style="font-size: 10px;">Objective-C</a> <a href="/tags/OpenSlide/" style="font-size: 10px;">OpenSlide</a> <a href="/tags/PHP/" style="font-size: 20px;">PHP</a> <a href="/tags/PHPStorm/" style="font-size: 10px;">PHPStorm</a> <a href="/tags/PSR/" style="font-size: 10px;">PSR</a> <a href="/tags/Perl/" style="font-size: 10px;">Perl</a> <a href="/tags/Prolog/" style="font-size: 10px;">Prolog</a> <a href="/tags/Python/" style="font-size: 10px;">Python</a> <a href="/tags/Pytorch/" style="font-size: 10px;">Pytorch</a> <a href="/tags/Reflection/" style="font-size: 10px;">Reflection</a> <a href="/tags/Ruby/" style="font-size: 10px;">Ruby</a> <a href="/tags/SICP/" style="font-size: 10px;">SICP</a> <a href="/tags/Server/" style="font-size: 15px;">Server</a> <a href="/tags/Slim/" style="font-size: 10px;">Slim</a> <a href="/tags/Something/" style="font-size: 10px;">Something</a> <a href="/tags/Swift/" style="font-size: 10px;">Swift</a> <a href="/tags/Tmux/" style="font-size: 10px;">Tmux</a> <a href="/tags/Typora/" style="font-size: 10px;">Typora</a> <a href="/tags/UK/" style="font-size: 11.67px;">UK</a> <a href="/tags/UniApp/" style="font-size: 10px;">UniApp</a> <a href="/tags/VB-NET/" style="font-size: 10px;">VB.NET</a> <a href="/tags/VPS/" style="font-size: 10px;">VPS</a> <a href="/tags/VirtualBox/" style="font-size: 10px;">VirtualBox</a> <a href="/tags/Vue/" style="font-size: 11.67px;">Vue</a> <a href="/tags/Vultr/" style="font-size: 10px;">Vultr</a> <a href="/tags/WSI/" style="font-size: 10px;">WSI</a> <a href="/tags/angular/" style="font-size: 10px;">angular</a> <a href="/tags/array-key-exists/" style="font-size: 10px;">array_key_exists</a> <a href="/tags/array-search/" style="font-size: 10px;">array_search</a> <a href="/tags/autoload/" style="font-size: 10px;">autoload</a> <a href="/tags/babel/" style="font-size: 10px;">babel</a> <a href="/tags/canvas/" style="font-size: 10px;">canvas</a> <a href="/tags/convolution/" style="font-size: 10px;">convolution</a> <a href="/tags/cover-view/" style="font-size: 11.67px;">cover-view</a> <a href="/tags/cryptography/" style="font-size: 10px;">cryptography</a> <a href="/tags/curl/" style="font-size: 10px;">curl</a> <a href="/tags/decrypt/" style="font-size: 10px;">decrypt</a> <a href="/tags/deep-learning/" style="font-size: 10px;">deep learning</a> <a href="/tags/edge-detect/" style="font-size: 10px;">edge detect</a> <a href="/tags/efficiency/" style="font-size: 10px;">efficiency</a> <a href="/tags/electron/" style="font-size: 11.67px;">electron</a> <a href="/tags/emoji/" style="font-size: 10px;">emoji</a> <a href="/tags/encrypt/" style="font-size: 10px;">encrypt</a> <a href="/tags/event-loop/" style="font-size: 10px;">event-loop</a> <a href="/tags/few-shot-classification/" style="font-size: 11.67px;">few-shot classification</a> <a href="/tags/filter/" style="font-size: 11.67px;">filter</a> <a href="/tags/firewall/" style="font-size: 10px;">firewall</a> <a href="/tags/framework/" style="font-size: 10px;">framework</a> <a href="/tags/git/" style="font-size: 10px;">git</a> <a href="/tags/gulp/" style="font-size: 10px;">gulp</a> <a href="/tags/image-processing/" style="font-size: 13.33px;">image processing</a> <a href="/tags/in-array/" style="font-size: 10px;">in_array</a> <a href="/tags/interviews/" style="font-size: 10px;">interviews</a> <a href="/tags/javascript/" style="font-size: 13.33px;">javascript</a> <a href="/tags/kernel/" style="font-size: 10px;">kernel</a> <a href="/tags/life/" style="font-size: 11.67px;">life</a> <a href="/tags/linux/" style="font-size: 10px;">linux</a> <a href="/tags/macOS/" style="font-size: 10px;">macOS</a> <a href="/tags/machine-learning/" style="font-size: 10px;">machine learning</a> <a href="/tags/math/" style="font-size: 10px;">math</a> <a href="/tags/mean/" style="font-size: 10px;">mean</a> <a href="/tags/networks/" style="font-size: 11.67px;">networks</a> <a href="/tags/neural-network/" style="font-size: 10px;">neural network</a> <a href="/tags/node/" style="font-size: 10px;">node</a> <a href="/tags/noise/" style="font-size: 10px;">noise</a> <a href="/tags/normalize/" style="font-size: 10px;">normalize</a> <a href="/tags/notes/" style="font-size: 16.67px;">notes</a> <a href="/tags/npm/" style="font-size: 11.67px;">npm</a> <a href="/tags/performance/" style="font-size: 10px;">performance</a> <a href="/tags/permission/" style="font-size: 10px;">permission</a> <a href="/tags/postgraduate/" style="font-size: 11.67px;">postgraduate</a> <a href="/tags/reading/" style="font-size: 10px;">reading</a> <a href="/tags/routing/" style="font-size: 10px;">routing</a> <a href="/tags/sobel/" style="font-size: 10px;">sobel</a> <a href="/tags/std-dev/" style="font-size: 10px;">std dev</a> <a href="/tags/summary/" style="font-size: 10px;">summary</a> <a href="/tags/tools/" style="font-size: 10px;">tools</a> <a href="/tags/ufw/" style="font-size: 10px;">ufw</a> <a href="/tags/公众号阅读笔记/" style="font-size: 10px;">公众号阅读笔记</a> <a href="/tags/小程序/" style="font-size: 18.33px;">小程序</a> <a href="/tags/微信/" style="font-size: 13.33px;">微信</a> <a href="/tags/羊毛/" style="font-size: 10px;">羊毛</a> <a href="/tags/软件设计/" style="font-size: 10px;">软件设计</a>
    </div>
  </div>

  
    
  <div class="widget-wrap">
    <h3 class="widget-title">Archives</h3>
    <div class="widget">
      <ul class="archive-list"><li class="archive-list-item"><a class="archive-list-link" href="/archives/2022/09/">September 2022</a><span class="archive-list-count">2</span></li><li class="archive-list-item"><a class="archive-list-link" href="/archives/2022/08/">August 2022</a><span class="archive-list-count">1</span></li><li class="archive-list-item"><a class="archive-list-link" href="/archives/2022/05/">May 2022</a><span class="archive-list-count">1</span></li><li class="archive-list-item"><a class="archive-list-link" href="/archives/2022/03/">March 2022</a><span class="archive-list-count">1</span></li><li class="archive-list-item"><a class="archive-list-link" href="/archives/2022/02/">February 2022</a><span class="archive-list-count">5</span></li><li class="archive-list-item"><a class="archive-list-link" href="/archives/2022/01/">January 2022</a><span class="archive-list-count">3</span></li><li class="archive-list-item"><a class="archive-list-link" href="/archives/2021/12/">December 2021</a><span class="archive-list-count">1</span></li><li class="archive-list-item"><a class="archive-list-link" href="/archives/2021/10/">October 2021</a><span class="archive-list-count">4</span></li><li class="archive-list-item"><a class="archive-list-link" href="/archives/2021/09/">September 2021</a><span class="archive-list-count">2</span></li><li class="archive-list-item"><a class="archive-list-link" href="/archives/2021/07/">July 2021</a><span class="archive-list-count">2</span></li><li class="archive-list-item"><a class="archive-list-link" href="/archives/2021/06/">June 2021</a><span class="archive-list-count">2</span></li><li class="archive-list-item"><a class="archive-list-link" href="/archives/2021/05/">May 2021</a><span class="archive-list-count">7</span></li><li class="archive-list-item"><a class="archive-list-link" href="/archives/2021/04/">April 2021</a><span class="archive-list-count">2</span></li><li class="archive-list-item"><a class="archive-list-link" href="/archives/2021/03/">March 2021</a><span class="archive-list-count">4</span></li><li class="archive-list-item"><a class="archive-list-link" href="/archives/2021/02/">February 2021</a><span class="archive-list-count">2</span></li><li class="archive-list-item"><a class="archive-list-link" href="/archives/2021/01/">January 2021</a><span class="archive-list-count">6</span></li><li class="archive-list-item"><a class="archive-list-link" href="/archives/2020/12/">December 2020</a><span class="archive-list-count">4</span></li><li class="archive-list-item"><a class="archive-list-link" href="/archives/2020/11/">November 2020</a><span class="archive-list-count">1</span></li><li class="archive-list-item"><a class="archive-list-link" href="/archives/2020/10/">October 2020</a><span class="archive-list-count">6</span></li><li class="archive-list-item"><a class="archive-list-link" href="/archives/2020/09/">September 2020</a><span class="archive-list-count">2</span></li><li class="archive-list-item"><a class="archive-list-link" href="/archives/2020/08/">August 2020</a><span class="archive-list-count">1</span></li><li class="archive-list-item"><a class="archive-list-link" href="/archives/2020/05/">May 2020</a><span class="archive-list-count">2</span></li><li class="archive-list-item"><a class="archive-list-link" href="/archives/2019/10/">October 2019</a><span class="archive-list-count">1</span></li><li class="archive-list-item"><a class="archive-list-link" href="/archives/2019/08/">August 2019</a><span class="archive-list-count">2</span></li><li class="archive-list-item"><a class="archive-list-link" href="/archives/2019/05/">May 2019</a><span class="archive-list-count">1</span></li><li class="archive-list-item"><a class="archive-list-link" href="/archives/2019/04/">April 2019</a><span class="archive-list-count">3</span></li><li class="archive-list-item"><a class="archive-list-link" href="/archives/2019/03/">March 2019</a><span class="archive-list-count">1</span></li><li class="archive-list-item"><a class="archive-list-link" href="/archives/2019/01/">January 2019</a><span class="archive-list-count">1</span></li><li class="archive-list-item"><a class="archive-list-link" href="/archives/2018/12/">December 2018</a><span class="archive-list-count">3</span></li><li class="archive-list-item"><a class="archive-list-link" href="/archives/2018/09/">September 2018</a><span class="archive-list-count">1</span></li><li class="archive-list-item"><a class="archive-list-link" href="/archives/2018/08/">August 2018</a><span class="archive-list-count">2</span></li><li class="archive-list-item"><a class="archive-list-link" href="/archives/2018/06/">June 2018</a><span class="archive-list-count">5</span></li><li class="archive-list-item"><a class="archive-list-link" href="/archives/2018/05/">May 2018</a><span class="archive-list-count">3</span></li><li class="archive-list-item"><a class="archive-list-link" href="/archives/2018/02/">February 2018</a><span class="archive-list-count">1</span></li><li class="archive-list-item"><a class="archive-list-link" href="/archives/2017/12/">December 2017</a><span class="archive-list-count">1</span></li><li class="archive-list-item"><a class="archive-list-link" href="/archives/2017/10/">October 2017</a><span class="archive-list-count">4</span></li></ul>
    </div>
  </div>


  
    
  <div class="widget-wrap">
    <h3 class="widget-title">Recent Posts</h3>
    <div class="widget">
      <ul>
        
          <li>
            <a href="/2022/9/22/notes/Back-to-China-1/">伦敦飞香港回内地，土耳其转机</a>
          </li>
        
          <li>
            <a href="/2022/9/11/ComputerVision/Normalize-images-with-transform-in-pytorch-dataloader/">Normalize images with transform in pytorch dataloader</a>
          </li>
        
          <li>
            <a href="/2022/8/6/Python/OpenSlide-indroduction/">OpenSlide indroduction</a>
          </li>
        
          <li>
            <a href="/2022/5/6/Programming-Language/Learn-Prolog/">Learn Prolog</a>
          </li>
        
          <li>
            <a href="/2022/3/20/Deep-learning/Training-Model-on-Nvidia-Digits/">Training Model on Nvidia DIGITS</a>
          </li>
        
      </ul>
    </div>
  </div>

  
</aside>
        
      </div>
      <footer id="footer">
  
  <div class="outer">
    <div id="footer-info" class="inner">
      &copy; 2022 bilberry<br>
      Powered by <a href="http://hexo.io/" target="_blank" rel="nofollow">Hexo</a>
    </div>
  </div>
</footer>

    </div>
    <nav id="mobile-nav">
  
    <a href="/" class="mobile-nav-link">Home</a>
  
    <a href="/archives" class="mobile-nav-link">Archives</a>
  
    <a href="/about/eng.html" class="mobile-nav-link">About</a>
  
</nav>
    

<script src="//cdn.jsdelivr.net/npm/jquery@2.2.4/dist/jquery.min.js"></script>


  <link rel="stylesheet" href="/fancybox/jquery.fancybox.css">
  <script src="/fancybox/jquery.fancybox.pack.js"></script>


<script src="/js/script.js"></script>

  </div>
</body>
</html>